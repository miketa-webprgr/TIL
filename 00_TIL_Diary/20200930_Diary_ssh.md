# 公開鍵について

これをやっておくように言われた。  
公開鍵自体もふわっとした理解だったので、改めて勉強してみた。  

- [SSH公開鍵認証で接続するまで \- Qiita](https://qiita.com/kazokmr/items/754169cfa996b24fcbf5)

## そもそも公開鍵とは

### 南京錠の例え

- 南京錠の箱に手紙を入れて送るイメージ
- 誰でも広場に置いてある南京錠を使って、みけたに手紙を送れる
- けど、その手紙を読めるのはみけただけ
- なので、みけたと秘密のやりとりをしたい人は、簡単に鍵を取っていけばいい

### 逆方向の話

- その南京錠を使うと、文章を作ると偽造防止ができる
- なぜなら、その鍵はみけたしか持ってないから

### 公開鍵認証方式

- 公開鍵認証方式は公開鍵と秘密鍵の２つの鍵(キーペア)を使用した接続方式。
- サーバーに公開鍵、クライアントに秘密鍵を置いて使用する。
- 公開鍵認証を使うとパスワード入力なしでログインする事が可能になる。

つまり、  

- クライアントが秘密鍵を作成、サーバーに公開鍵を送る
- サーバーはクライアントに秘密情報を送ることができる
- クライアントは秘密鍵で見ることができる

## 公開鍵を作ってみる

```text
ssh-keygen -t rsa -b 4096 {-f 鍵のパス}
(暗号方式:RSA,鍵長:4096bit)
```

試してみる。  
引数が多いと怒られる。  

```text
ssh-keygen -t rsa -b 4096 {-f 鍵のパス}
Too many arguments.
```

## オプションについて調べてみる

オプションを調べてみる。  

`-t`は、鍵の種類を示している。  
`-b`は、鍵の長さを示している。  

`-f`について、完全に勘違いしていたっぽい。  

ssh-keygenのオプションじゃないらしい。  
鍵のパスっていうのは、パスワードだと思ってた笑  

デフォルトの保存場所でいいので、{-f 鍵のパス}は未入力でいく。  
うまくいった。  

`/Users/ユーザー名/.ssh`に保存されている。  

- 秘密鍵：id_rsa
- 公開鍵：id_rsa.pub

間違えて、秘密鍵をばらさないように注意したい。  

リモートサーバーへ公開鍵を登録するなど、このあたりもやっておきたい。  
このあたりは、本当に何も知らない。。。

## 参考

- [インフラエンジニアじゃなくても押さえておきたいSSHの基礎知識 \- Qiita](https://qiita.com/tag1216/items/5d06bad7468f731f590e)
- [妻に公開鍵暗号を教えてみた \- 西尾泰和のはてなダイアリー](https://nishiohirokazu.hatenadiary.org/entry/20140809/1407556873)
